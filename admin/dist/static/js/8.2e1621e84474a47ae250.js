webpackJsonp([8],{1032:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 表格")]),e._v(" "),a("el-breadcrumb-item",[e._v("基础表格")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:e.cate,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"编号",sortable:"",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"分类名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editFlag?a("span",{staticClass:"cell-edit-input"},[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})],1):a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sum",label:"文章数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v(e._s(t.row.editFlag?"完成":"编辑"))]),e._v(" "),a("el-popover",{ref:"deleteConfirm",attrs:{placement:"top",width:"160"},model:{value:t.row.confirmDeleteVisible,callback:function(a){e.$set(t.row,"confirmDeleteVisible",a)},expression:"scope.row.confirmDeleteVisible"}},[a("p",[e._v("确定删除吗？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.deleteCalcel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.deleteSubmit}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:deleteConfirm",arg:"deleteConfirm"}],attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.page},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},1044:function(e,t,a){var i=a(725);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(202)("74d6aa52",i,!0)},512:function(e,t,a){a(1044);var i=a(203)(a(626),a(1032),"data-v-b066a758",null);e.exports=i.exports},626:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{page:1,cate:[],currentDeleteItem:{},cateBack:[],tableData:[],cur_page:1,multipleSelection:[],del_list:[],searchKey:""}},mounted:function(){this.getAllCate()},methods:{deleteCalcel:function(){console.log(this.currentDeleteItem),this.cate[this.currentDeleteItem.index].confirmDeleteVisible=!1,this.currentDeleteItem={},console.log("取消")},deleteSubmit:function(){var e=this.currentDeleteItem.id,t=this;this.$axios.post(this.$API.Cate.deleteById,{id:e}).then(function(e){console.log(e.data.data),t.$message.success("删除成功！"),t.cate.splice(t.currentDeleteItem.index,1)})},getAllCate:function(){var e=this;this.$axios.get(this.$API.Cate.getAll).then(function(t){for(var a in t.data.data)t.data.data[a].confirmDeleteVisible=!1;e.cate=t.data.data,e.resetEditFlag(!1),e.cateBack=e.cate,console.log(t.data.data)})},add:function(e){console.log(e)},resetEditFlag:function(e){for(var t=0;t<this.cate.length;t++)this.$set(this.cate[t],"editFlag",e)},handleCurrentChange:function(e){this.cur_page=e},search:function(e){e=e.trim();for(var t=[],a=0;a<this.cateBack.length;a++)-1!=this.cateBack[a].name.indexOf(e)&&t.push(this.cateBack[a]);this.cate=t},handleEdit:function(e,t){if(this.cate[e].editFlag)return void this.updateCate(e,t);this.$set(this.cate[e],"editFlag",!this.cate[e].editFlag)},updateCate:function(e,t){console.log(t);var a=this,i={id:t.id,name:t.name};this.$axios.post(this.$API.Cate.updateCate,i).then(function(t){console.log(t.data.data),a.$set(a.cate[e],"editFlag",!a.cate[e].editFlag),a.$message.success("修改成功！")}).catch(function(t){console.log(t),a.$set(a.cate[e],"editFlag",!a.cate[e].editFlag),a.$message.success("修改失败！")})},handleDelete:function(e,t){console.log(e),console.log(t),t.index=e,this.currentDeleteItem=t,this.$message.error("删除第"+(e+1)+"行")},handleSelectionChange:function(e){this.multipleSelection=e}},watch:{searchKey:function(e){""==e?this.cate=this.cateBack:this.search(e)}}}},725:function(e,t,a){t=e.exports=a(201)(!1),t.push([e.i,".handle-box[data-v-b066a758]{margin-bottom:20px}.handle-select[data-v-b066a758]{width:120px}.handle-input[data-v-b066a758]{width:300px;display:inline-block}",""])}});